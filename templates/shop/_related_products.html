{% load static %}

<div>
  {% if related_products %}
    <div class="d-flex align-items-center mb-3">
      <h4 class="mb-0 fw-bold">Related Products</h4>
    </div>
    <div class="related-products-carousel d-flex flex-row flex-nowrap overflow-auto pb-2" tabindex="0" aria-label="Related products carousel">
      {% for product in related_products %}
        <a href="{% url 'shop:product_detail' product.pk %}" class="related-product-card text-decoration-none text-dark" role="group" aria-label="{{ product.name }}">
          <div class="card h-100 shadow-sm border-0">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="card-img-top related-product-img mx-auto" />
            <div class="card-body d-flex flex-column pt-2 pb-2 text-center">
              <div class="product-name text-truncate mb-1" title="{{ product.name }}">
                {{ product.name }}
              </div>
              <div class="product-description mb-2" title="{{ product.description|default:'No description available' }}">
                {{ product.description|default:"No description available" }}
              </div>
              <div class="product-price text-success fw-bold mb-0">â‚¹ {{ product.price|floatformat:2 }}</div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-muted py-2 px-3">No related products available.</div>
  {% endif %}
</div>

<style>
/* Modern Font */
.related-products-carousel, .card, .product-name, .product-description {
    font-family: 'Inter', 'Roboto', sans-serif;
}

/* Horizontal Scroll */
.related-products-carousel {
  scrollbar-width: thin;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 10px;
  outline: none;
}

.related-products-carousel::-webkit-scrollbar {
  height: 6px;
}

.related-products-carousel::-webkit-scrollbar-thumb {
  background-color: #c1c1c1;
  border-radius: 10px;
}

/* Cards */
.related-product-card {
  flex: 0 0 150px;
  max-width: 150px;
  margin-right: 10px;
  display: flex;
  transition: transform 0.2s;
}

.related-product-card:last-child {
  margin-right: 0;
}

.related-product-card:hover {
  transform: translateY(-3px);
}

.card {
  border-radius: 12px;
  min-height: 270px;
  width: 100%;
  display: flex;
  flex-direction: column;
  transition: all 0.3s ease;
  background: #fff;
  cursor: pointer;
}

.card:hover {
  box-shadow: 0 10px 25px rgba(0,0,0,0.12);
}

/* Product Image */
.related-product-img {
  width: 100%;
  height: 95px;
  object-fit: contain;
  display: block;
  margin: 0 auto;
  border-radius: 6px;
  transition: transform 0.3s ease;
}

.card:hover .related-product-img {
  transform: scale(1.08);
}

/* Card Body */
.card-body {
  padding: 0.5rem 0.3rem;
}

/* Product Name */
.product-name {
  font-weight: 600;
  font-size: 0.95rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Product Description */
.product-description {
  font-size: 0.82rem;
  color: #666;
  min-height: 2.6em;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-align: center;
  line-height: 1.3;
}

/* Product Price */
.product-price {
  font-size: 1.05rem;
  font-weight: 700;
}

/* Responsive */
@media (max-width: 600px) {
  .related-product-card {
    flex: 0 0 120px;
    max-width: 120px;
  }
  .related-product-img {
    height: 70px;
  }
  .card {
    min-height: 220px;
  }
}
</style>
